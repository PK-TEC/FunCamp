<% layout('layouts/boilerplate') %>
<h1 style="text-align: center">All Campgrounds</h1>
<div id="cluster-map"></div>

<% for(let campground of campgrounds) {%>
<div class="card mb-3">
	<div class="row">
		<div class="col-md-4">
			<% if (campground.images.length) { %>
			<img
				class="img-fluid"
				alt=""
				src="<%= campground.images[0].url %>"
				style="border-radius: 20px"
			/>
			<% } else{%>
			<img
				src="https://res.cloudinary.com/do3ezfpjk/image/upload/v1611436603/FunCamp/h2aoi2qovxfof4wjisvf.png"
				class="img-fluid"
				alt=""
			/>
			<%} %>
		</div>
		<div class="col-md-8">
			<h5 class="card-title"><%= campground.title %></h5>
			<p class="card-text"><%= campground.description %></p>
			<p class="card-text">
				<small class="text-muted"><%= campground.location %> </small>
			</p>
			<a
				class="btn btn-primary"
				href="/campgrounds/<%= campground._id %> "
				>View <%= campground.title %>
			</a>
		</div>
	</div>
</div>
<% }%>
<script>
	const mapToken = "<%-process.env.MAPBOX_TOKEN%>";
	const campgrounds = {features: <%-JSON.stringify(campgrounds)%>};
</script>
<script src="/javascripts/clusterMap.js"></script>
